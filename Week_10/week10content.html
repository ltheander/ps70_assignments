<!DOCTYPE html>
<html lang="en">

<title>PS70: Intro to Digital Fabrication </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="../style.css" rel="stylesheet">


<nav class="navbar navbar-expand-sm navbar-light bg-light">
  <div style="align-items: left; justify-content:left;" class="container-fluid">
    <h3 class="nav-title"> PS70: Intro to Digital Fabrication</h3>
    <div class="navbar-nav">
      <h4></h4>
      <h4><a class="nav-link" href="../index.html">Home</a></h4>
      <h4><a class="nav-link" href="../about.html">About</a></h4>
    </div>
  </div>
</nav>

<body>


<xmp style="display:none;">
<br> 

#### Week 10: Machine Building and End Effectors

<br>

<h3>MVP: Figuring Out How to Use More Buttons Than The Arduino Has Pins</h3>

<p>One of the largest problems I have had while designing my final project has been figuring out how to use many buttons (25 needed for the keyboard keys alone) when microcontrollers only have a limited number. I first tried solving this problem in week 7 by using the ESP32 2hich has more pins than the Arduino. However, this did not work as weel as I hoped and produced an unpleasant sound. I needed a better idea.</p>

<h3>Idea One: Multiplexing</h3>

<p>The idea that I first learned about was multiplexing, or assigning each input a series of 1's and 0's (4 in a 16 channel multiplexer). This was the first design, based off of an online tutorial for using 16 buttons with an Arduino.</p>

![image of messy circuit](./oldcirc0.jpg)

<p>There were two major problems with this circuit. First, it is incredibly messy with wires going in every which direction. Second, it didn't work. Even after stripping the circuit to the bare minimum, I could not get a single button to reliably read through the microcontroller. I decided to try again with a much simpler circuit also from an online tutorial.</p>

![image of neat but not working circuit](./oldcirc.jpg)

<p>Unfortunately, this circuit still did not. After about four hours of trying with the help of Ibrahim, Kassia, Bella, and every possible online tutorial, I could not get multiplexing to work in the slightest. I even tried replacing the microcontroller with a brand new one and still no luck. Eventually, I had to start anew with a brand new idea... again.</p>

<h3>Idea Two: Voltage Divider</h3>

<p>After ranting about my problems to a friend, I was introduced to the idea of voltage dividing, or using resistors of different values to allow for multiple buttons with only one non-power or ground pin. After playing around with the idea, this is the circuit that I got.</p>

![image of voltage divided circuit](./newcirc.jpg)

<p>And here is the code I developed to play a different pitch on a piezo buzzer for each button that is pushed.</p>

<pre><code><p style="text-align: left;">

#define T_A 220 * 2
#define T_AB 233.08 * 2
#define T_B 246.94 * 2
#define T_C 261.63*2
#define T_CD 277.18*2
#define T_D 293.66*2
#define T_DE 311.13*2
#define T_E 329.63*2
#define T_F 349.23*2
#define T_FG 369.99*2
#define T_G 392*2
#define T_A4 440*2

const int Buzz = 11;

void setup()
{
Serial.begin(9600);
  
}

void loop()
{
  while((analogRead(A0) > 1009) && (analogRead(A0) < 1018))
  {
    tone(Buzz,T_A);
  }
 while((analogRead(A0) > 1000) && (analogRead(A0) < 1008))
  {
    tone(Buzz,T_B);
  }
  while((analogRead(A0) > 985) && (analogRead(A0) < 999))
  {
    tone(Buzz,T_C);
  }
  while((analogRead(A0) > 950) && (analogRead(A0) < 984))
  {
    tone(Buzz,T_D);
  }
  while((analogRead(A0) > 900) && (analogRead(A0) < 945))
  {
    tone(Buzz,T_E);
  }
  while((analogRead(A0) > 830) && (analogRead(A0) < 880))
  {
    tone(Buzz,T_F);
  }
  while((analogRead(A0) > 750) && (analogRead(A0) < 800))
  {
    tone(Buzz,T_G);
  }
  while((analogRead(A0) > 670) && (analogRead(A0) < 730))
  {
    tone(Buzz,T_A4);
  }

  noTone(Buzz);

}

</p></code></pre>

<p>Here is this system in action.</p>

<video width="600" height="800" controls>
  <source src= "IMG-6268.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
Your browser does not support the video tag.
</video>

<p>Voltage dividing will be the easiest and most efficient way for me to use the 25 total buttons needed for my circuit. I will be able to combine one or two of these voltage divided circuits using analog pins with the circuit I made a few weeks ago (below) using digital pins to make a keyboard with all the buttons I need. </p>

![image of original keyboard design](./oldkey.jpg)

And here is a	[link to where the cover image came from](https://columbiaokura.com/thought-leadership/types-robotic-end-effectors-end-arm-tools//).

</xmp>
</body>

<script src="../strapdown.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" ></script>

</html>